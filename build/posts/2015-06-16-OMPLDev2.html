<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2015-06-16" />
  <title>OMPL Web Development - Part 2</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
<div class="navbar">
  <div style="text-align: left; display: inline-block; width: 50%">
    <a href="/index.html">home</a>&nbsp;&nbsp;
    <a href="/blog.html">blog</a>&nbsp;&nbsp;
    <!-- <a href="/projects.html">projects</a>&nbsp;&nbsp; -->
    <a href="/rss.xml">rss</a>
  </div>
  <div style="text-align: right; display: inline-block; width: 49%">
    <a href="https://www.github.com/prb2">github</a>
  </div>
  <hr>
</div>
<header id="title-block-header">
<h1 class="title">OMPL Web Development - Part 2</h1>
<p class="date">2015-06-16</p>
</header>
<hr />
<p>Significant progress has been made in the past week or so and the
application looks and behaves very differently than before. Furthermore,
the user interface has been completely overhauled to accommodate new
features and look cleaner.</p>
<p><img src="../images/omplweb/existing.png" class="img-responsive"></p>
<h2 id="design-functionality">Design &amp; Functionality</h2>
<p>The biggest change in terms of the interface is the addition of the
visualization to the configuration page. Now, the robot's position will
be updated to reflect any changes the user makes in the configuration
panel. When the problem has been configured to the user's liking and
solved, the solution path (if one was found) will be drawn and
animated.</p>
<p>The visualization is being built primarily using <a
href="https://www.khronos.org/webgl/">WebGL</a> with the <a
href="http://threejs.org/">three.js</a> library.</p>
<p>If the user selects an existing problem from the <code>Problem</code>
drop down menu, a request is sent to the server to retrieve that
problem's configuration information and its robot and environment
models. The configuration fields are then filled in with the information
from the server and the models are loaded and drawn. The screenshot
above is state of the interface when an existing problem has been
selected.</p>
<p>If the user selects a custom problem from the <code>Problem</code>
drop down menu, then the sidebar will expand to reveal options for
uploading custom robot and environment models and, optionally, a
configuration file. Once these files have been selected, the will be
uploaded to the server and drawn, as seen in the screenshot below.</p>
<p><img src="../images/omplweb/custom.png" class="img-responsive"></p>
<p>The <code>Planner</code> tab allows the user to select which planner
to use for solving the problem. When a planner is selected, the default
values for that planner's parameters are retrieved from the server and
displayed. The user can edit these options if they wish. The
<code>Bounds</code> tab allows the user to modify the bounding box for
the problem, if they are dissatisfied with the default values for that
environment.</p>
<p>Finally, from <code>Solve</code> tab, the user can name the problem
and specify a time limit for solving the problem. If all the required
fields are satisfied, they can click the solve button and await the
results. At this point the problem is sent to the server for processing.
When the results are returned, the information is displayed within the
pane. If a successful solution path was found, it will be drawn and the
robot will be animated traveling the path. This animation is still in
development.</p>
<p><a href="https://github.com/prb2/omplweb">OMPL Web on GitHub</a></p>
<p><a href="http://ompl.kavrakilab.org">Open Motion Planning
Library</a></p>
<svg class="square" viewBox="0 0 6 2" xmlns="http://www.w3.org/2000/svg">
    <polygon stroke="white" stroke-width=0.02 points="0,0  1,0  0,1" />
    <polygon stroke="white" stroke-width=0.02 points="0,1  1,0  1,1" />
    <polygon stroke="white" stroke-width=0.02 points="1,0  1,1  2,1" />
    <polygon stroke="white" stroke-width=0.02 points="1,0  2,1  2,0" />
    <polygon stroke="white" stroke-width=0.02 points="2,0  3,0  2,1" />
    <polygon stroke="white" stroke-width=0.02 points="2,1  3,0  3,1" />
    <polygon stroke="white" stroke-width=0.02 points="3,0  3,1  4,1" />
    <polygon stroke="white" stroke-width=0.02 points="3,0  4,1  4,0" />
    <polygon stroke="white" stroke-width=0.02 points="4,0  5,0  4,1" />
    <polygon stroke="white" stroke-width=0.02 points="4,1  5,0  5,1" />
    <polygon stroke="white" stroke-width=0.02 points="5,0  5,1  6,1" />
    <polygon stroke="white" stroke-width=0.02 points="5,0  6,1  6,0" />
    <polygon stroke="white" stroke-width=0.02 points="0,1  0,2  1,2" />
    <polygon stroke="white" stroke-width=0.02 points="0,1  1,1  1,2" />
    <polygon stroke="white" stroke-width=0.02 points="1,1  1,2  2,1" />
    <polygon stroke="white" stroke-width=0.02 points="1,2  2,1  2,2" />
    <polygon stroke="white" stroke-width=0.02 points="2,1  2,2  3,2" />
    <polygon stroke="white" stroke-width=0.02 points="2,1  3,1  3,2" />
    <polygon stroke="white" stroke-width=0.02 points="3,1  3,2  4,1" />
    <polygon stroke="white" stroke-width=0.02 points="3,2  4,1  4,2" />
    <polygon stroke="white" stroke-width=0.02 points="4,1  4,2  5,2" />
    <polygon stroke="white" stroke-width=0.02 points="4,1  5,1  5,2" />
    <polygon stroke="white" stroke-width=0.02 points="5,1  5,2  6,1" />
    <polygon stroke="white" stroke-width=0.02 points="5,2  6,1  6,2" />
</svg>
<style>
.square {
    height: 128px;
    width: 128px;
}
</style>
<script>
    function getRandomNum(max) {
        return Math.floor(Math.random() * max);
    }
    function getRandomColor(colors) {
        return colors[getRandomNum(colors.length)]
    }
    colorSets = [
        ["#021526", "#03346E", "#6EACDA", "#E2E2B6"],
        ["#DEF9C4", "#9CDBA6", "#50B498", "#468585"],
        ["#F9ED69", "#F08A5D", "#B83B5E", "#6A2C70"],
        ["#3D30A2", "#EB5B00", "#E4003A", "#B60071"],
    ]
    for (s of document.getElementsByTagName("svg")) {
        // pick a colorSet randomly for the polygon stroke="white" stroke-width=0.02s in this square
        colors = colorSets[getRandomNum(colorSets.length)]
        console.log("picked colors", colors)
        lastColor = colors[0]
        for (p of s.children) {
        if (Math.random() < 0.4) {
            // reuse the last color
        } else {
            // pick a random color from the colorSet
            lastColor = getRandomColor(colors)
        }
        p.setAttribute("fill", lastColor)
        }
    }
</script>
</body>
</html>
